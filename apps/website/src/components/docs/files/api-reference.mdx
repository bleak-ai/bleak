# API Reference

Complete reference for all BleakAI types, functions, and classes. This is your go-to resource for implementation details.

## Classes

### BleakSession

The main class for managing conversations with BleakAI.

```typescript
class BleakSession {
  constructor(config: BleakSessionConfig);

  startBleakConversation(prompt: string): Promise<BleakStartResult>;
  requestMoreBleakQuestions(
    answers: Record<string, string>
  ): Promise<BleakContinueResult>;
  finishBleakConversation(answers: Record<string, string>): Promise<string>;
  resolveComponents(questions: BleakQuestion[]): BleakComponentConfig[];
}
```

## Configuration Types

### BleakSessionConfig

Configuration object for creating a BleakSession.

```typescript
interface BleakSessionConfig {
  baseUrl: string; // API endpoint URL
  apiKey: string; // Authentication API key
  elements: ElementConfig; // Component configuration
  headers?: Record<string, string>; // Optional custom headers
  timeout?: number; // Request timeout in milliseconds (default: 30000)
  debug?: boolean; // Enable debug logging (default: false)
}
```

### ElementConfig

Maps component types to their React components and descriptions.

```typescript
interface ElementConfig {
  [componentType: string]: {
    component: React.ComponentType<any>; // Your React component
    description: string; // Description for AI understanding
  };
}
```

## Component Interface Types

### BleakComponentProps

Base interface that all BleakAI components must implement.

```typescript
interface BleakComponentProps {
  text: string; // Question text to display
  value: string; // Current value of the component
  onChange: (value: string) => void; // Callback when value changes
  uniqueId?: string; // Optional unique identifier
  elementIndex?: number; // Optional element index
}
```

### BleakChoiceProps

Extended interface for components with choice options (radio, dropdown, etc.).

```typescript
interface BleakChoiceProps extends BleakComponentProps {
  options: string[]; // Array of available options
}
```

## Question Types

### BleakQuestion

Represents a single question generated by BleakAI.

```typescript
interface BleakQuestion {
  question: string; // The question text
  type: string; // Component type to use
  options?: string[]; // Available options (for choice components)
  required?: boolean; // Whether answer is required
  placeholder?: string; // Placeholder text for inputs
}
```

## Response Types

### BleakStartResult

Response from starting a conversation.

```typescript
interface BleakStartResult {
  questions?: BleakQuestion[]; // Generated questions (if any)
  answer?: string; // Direct answer (if no questions needed)
  conversationId?: string; // Unique conversation identifier
}
```

### BleakContinueResult

Response from requesting more questions.

```typescript
interface BleakContinueResult {
  questions?: BleakQuestion[]; // Additional questions (if any)
  isComplete: boolean; // Whether conversation is ready to finish
  suggestedAction?: "continue" | "finish" | "clarify"; // Suggested next action
}
```

### BleakComponentConfig

Configuration object returned by `resolveComponents`.

```typescript
interface BleakComponentConfig {
  Component: React.ComponentType<any>; // The React component to render
  staticProps: Record<string, any>; // Props to pass to the component
  question: BleakQuestion; // The original question object
  key?: string; // Unique key for React rendering
}
```

## Method Details

### startBleakConversation()

Initiates a new conversation with BleakAI.

```typescript
startBleakConversation(prompt: string): Promise<BleakStartResult>
```

**Parameters:**

- `prompt` (string): Initial prompt or goal for the conversation

**Returns:** Promise that resolves to `BleakStartResult`

### requestMoreBleakQuestions()

Requests additional questions based on current answers.

```typescript
requestMoreBleakQuestions(answers: Record<string, string>): Promise<BleakContinueResult>
```

**Parameters:**

- `answers` (Record< string, string>): Current answers collected from user

**Returns:** Promise that resolves to `BleakContinueResult`

### finishBleakConversation()

Completes the conversation and returns final answer.

```typescript
finishBleakConversation(answers: Record<string, string>): Promise<string>
```

**Parameters:**

- `answers` (Record< string, string>): All collected answers

**Returns:** Promise that resolves to final answer string

### resolveComponents()

Maps questions to their corresponding UI components.

```typescript
resolveComponents(questions: BleakQuestion[]): BleakComponentConfig[]
```

**Parameters:**

- `questions` (BleakQuestion[]): Array of questions to resolve

**Returns:** Array of component configurations ready for rendering

## Error Handling

All methods may throw errors for:

- **Network failures**: Connection issues
- **Authentication errors**: Invalid API key
- **Rate limiting**: Too many requests
- **Server errors**: Backend service issues

Always wrap API calls in try-catch blocks for proper error handling.
