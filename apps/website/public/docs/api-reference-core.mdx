# Core Methods

Methods available on BleakChat instances.

## ask(prompt, options?)

Start a new conversation.

```typescript
ask(prompt: string, options?: {
  context?: any;
}): Promise<ChatResponse>
```

**Parameters:**

- `prompt` - The question or prompt to send
- `options.context` - Optional context object

**Example:**

```typescript
const response = await client.ask("Help me plan a vacation to Japan");

if (response.type === "questions") {
  console.log("AI needs more information:", response.questions);
} else if (response.type === "answer") {
  console.log("AI Response:", response.content);
}
```

## answer(answers)

Continue conversation with answers to questions.

```typescript
answer(answers: AnsweredQuestion[]): Promise<ChatResponse>
```

**Parameters:**

- `answers` - Array of answered questions

**Example:**

```typescript
const answers = [
  {question_id: "q1", answer: "$2000-5000"},
  {question_id: "q2", answer: "7 days"}
];

const response = await client.answer(answers);
```

## finish()

End the conversation and get final response.

```typescript
finish(): Promise<ChatResponse>
```

**Example:**

```typescript
const finalResponse = await client.finish();

if (finalResponse.type === "answer") {
  console.log("Final result:", finalResponse.content);
}
```

## Types

### ChatResponse

```typescript
type ChatResponse =
  | {type: "questions"; questions: InteractiveQuestion[]}
  | {type: "answer"; content: string}
  | {type: "complete"; content: string};
```

### InteractiveQuestion

```typescript
interface InteractiveQuestion {
  question_id: string;
  type: string;
  text: string;
  options?: string[] | null;
  required?: boolean;
}
```

### AnsweredQuestion

```typescript
interface AnsweredQuestion {
  question_id: string;
  answer: string | string[];
}
```

## Error Handling

```typescript
import {ChatError, RateLimitError, AuthenticationError} from "bleakai";

try {
  const response = await client.ask("Hello");
} catch (error) {
  if (error instanceof RateLimitError) {
    console.log(`Rate limited. Retry after: ${error.retryAfter}s`);
  } else if (error instanceof AuthenticationError) {
    console.log("Authentication failed. Check your API keys.");
  } else if (error instanceof ChatError) {
    console.log(`Chat error: ${error.message}`);
  }
}
```
