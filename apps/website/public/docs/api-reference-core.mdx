# Core Methods

Methods available on BleakChat instances for managing conversations.

## ask(prompt, options?)

Start a new conversation with BleakAI. The AI will analyze your prompt and determine if more information is needed.

```typescript
ask(prompt: string, options?: {
  context?: any;
}): Promise<ChatResponse>
```

**Parameters:**

- `prompt` - The question or request to send to the AI
- `options.context` - Optional context object for conversation state

**Example:**

```typescript
const response = await client.ask("Help me plan a vacation to Japan");

if (response.type === "questions") {
  console.log("AI needs more information:", response.questions);
} else if (response.type === "answer") {
  console.log("AI Response:", response.content);
}
```

## answer(answers)

Continue the conversation by providing answers to the AI's questions.

```typescript
answer(answers: AnsweredQuestion[]): Promise<ChatResponse>
```

**Parameters:**

- `answers` - Array of answers to the previously asked questions

**Example:**

```typescript
const answers = [
  {question_id: "q1", answer: "$2000-5000"},
  {question_id: "q2", answer: "7 days"}
];

const response = await client.answer(answers);
```

## finish()

End the conversation and get a final response based on the current context.

```typescript
finish(): Promise<ChatResponse>
```

**Example:**

```typescript
const finalResponse = await client.finish();

if (finalResponse.type === "answer") {
  console.log("Final result:", finalResponse.content);
}
```

## Types

### ChatResponse

Union type representing all possible responses from BleakAI.

```typescript
type ChatResponse =
  | {type: "questions"; questions: InteractiveQuestion[]}
  | {type: "answer"; content: string}
  | {type: "complete"; content: string};
```

### InteractiveQuestion

Represents a question generated by the AI that needs user input.

```typescript
interface InteractiveQuestion {
  question_id: string; // Unique identifier for the question
  type: string; // Component type (text, radio, multiSelect, etc.)
  text: string; // The question text to display
  options?: string[] | null; // Options for choice-based questions
  required?: boolean; // Whether the question must be answered
}
```

### AnsweredQuestion

Represents a user's answer to a question.

```typescript
interface AnsweredQuestion {
  question_id: string; // The ID of the question being answered
  answer: string | string[]; // User's response (string or array for multi-select)
}
```

## Error Handling

All methods can throw specific error types for different scenarios:

```typescript
import {ChatError, RateLimitError, AuthenticationError} from "bleakai";

try {
  const response = await client.ask("Hello");
} catch (error) {
  if (error instanceof RateLimitError) {
    console.log(`Rate limited. Retry after: ${error.retryAfter}s`);
  } else if (error instanceof AuthenticationError) {
    console.log("Authentication failed. Check your API keys.");
  } else if (error instanceof ChatError) {
    console.log(`Chat error: ${error.message}`);
  }
}
```
