# Examples

Practical examples for common BleakAI implementation patterns.

## Basic Chat

Simple question-answer conversation:

```typescript
import {createSimpleChatClient} from "bleakai";

const client = createSimpleChatClient({
  baseUrl: "http://localhost:8000",
  apiKey: "your-api-key"
});

async function basicChat() {
  const response = await client.ask("What's the weather like?");

  if (response.type === "answer") {
    console.log("AI Response:", response.content);
  }
}
```

## Vacation Planner

Interactive vacation planning with dynamic forms:

```typescript
const elements = [
  {type: "text", text: "What's your name?", options: null},
  {
    type: "radio",
    text: "Budget range?",
    options: ["$500-1000", "$1000-2500", "$2500+"]
  },
  {
    type: "multi_select",
    text: "Preferred activities?",
    options: ["Beach", "Museums", "Hiking", "Restaurants"]
  },
  {type: "slider", text: "How many days?", options: ["1", "14"]}
];

async function planVacation() {
  let response = await client.ask("Help me plan a vacation", {
    bleakElements: elements
  });

  while (response.type === "questions") {
    console.log("Questions to answer:");
    response.questions.forEach((q) => console.log(`- ${q.text}`));

    // In a real app, collect answers from your UI
    const answers = response.questions.map((q) => ({
      question_id: q.question_id,
      answer: getAnswerFromUI(q)
    }));

    response = await client.answer(answers);
  }

  if (response.type === "answer") {
    console.log("Your vacation plan:", response.content);
  }
}
```

## React Hook Integration

Custom hook for managing BleakAI conversations:

```typescript
import {useState, useCallback} from "react";
import {createSimpleChatClient, ChatResponse} from "bleakai";

export function useBleakChat(apiKey: string) {
  const [client] = useState(() =>
    createSimpleChatClient({
      baseUrl: "http://localhost:8000",
      apiKey
    })
  );

  const [response, setResponse] = useState<ChatResponse | null>(null);
  const [loading, setLoading] = useState(false);

  const ask = useCallback(
    async (prompt: string, elements?: any[]) => {
      setLoading(true);
      try {
        const result = await client.ask(prompt, {bleakElements: elements});
        setResponse(result);
      } catch (error) {
        console.error("Chat error:", error);
      } finally {
        setLoading(false);
      }
    },
    [client]
  );

  const answer = useCallback(
    async (answers: any[]) => {
      setLoading(true);
      try {
        const result = await client.answer(answers);
        setResponse(result);
      } catch (error) {
        console.error("Answer error:", error);
      } finally {
        setLoading(false);
      }
    },
    [client]
  );

  return {ask, answer, response, loading};
}
```

## Error Handling

Robust error handling for production apps:

```typescript
import {ChatError, RateLimitError, AuthenticationError} from "bleakai";

async function robustChat(prompt: string) {
  try {
    const response = await client.ask(prompt);
    return response;
  } catch (error) {
    if (error instanceof RateLimitError) {
      // Handle rate limiting
      console.log(`Rate limited. Retry after ${error.retryAfter} seconds`);
      await new Promise((resolve) =>
        setTimeout(resolve, error.retryAfter * 1000)
      );
      return robustChat(prompt); // Retry
    } else if (error instanceof AuthenticationError) {
      // Handle auth errors
      console.error("Authentication failed. Check your API key.");
      throw new Error("Invalid API key");
    } else if (error instanceof ChatError) {
      // Handle general chat errors
      console.error("Chat error:", error.message);
      throw error;
    } else {
      // Handle unexpected errors
      console.error("Unexpected error:", error);
      throw new Error("Something went wrong");
    }
  }
}
```
